<!DOCTYPE html>
<html lang="en" >
    <head>
        <meta charset="utf-8" />
        <title>mallanJS</title>
        <link type="text/css" rel="stylesheet" href="images/index.css">
    </head>
    <body>
        <header class="linear_bg">
            <div class="head">
                <h1><a href="index.html">mallanJS</a></h1>
                <h2>--by allanma mail:maqh1988@gmail.com</h2>
                <div class="search fr">
                    <input type="text" class="js_search_text" placeholder="API关键字" />
                </div>
            </div>
        </header>
        <div class="container cf">
            <aside class="menu border">
                <div class="menu_title linear_bg">
                    API
                </div>
                <div class="menu_list" id="menu_list">
                </div>
            </aside>
            <div class="content fr border">
                <div>
                <section id="holder_mallan">
                    <h3 class="linear_bg">Mallan.js</h3>
                    <div class="api">
                        <p>mallanJS核心库</p>
                        <p>在window下注册命名空间Mallan和$,两者等价,提供部分常用工具函数，以及mallanJS核心模块</p>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan(selector [,context])</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>selector</strong>;[必须];类型：String;自定义类型的名称或者选择器表达式 </p>
                                <p><span class="green">@param</span>：<strong>context</strong>;[可选];类型：String;自定义类型的名称或者选择器表达式 </p>
                                <p><span class="green">@returns</span>:自定义对象或者element对象</p>
                                <div>
                                    <p>Mallan函数先尝试选择自定义对象(<a href="#">extendCustom</a>),如果没有对应的自定义对象，则使用选择器，返回<a href="#">element</a>对象</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//选择自定义对象，返回Mallan.util.cookie对象</span>
$("cookie").get('username');
<span class="green">//选择器，返回element对象</span>
$("#code").addClass("someclass");</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.extend(obj)</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>obj</strong>;[必须];类型：Object; </p>
                                <p><span class="green">@returns</span>:null</p>
                                <div>
                                    <p>Mallan.extend函数扩展Mallan对象，为其添加属性</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//为Mallan添加require方法</span>
$.extend({
    "require":function(){
    <span class="green">//something to do</span>
    }
});</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.nameSpace.pack(location,obj)</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>location</strong>;[必须];类型：String; 必选以Mallan.开头,否则会抛出异常</p>
                                <p><span class="green">@param</span>：<strong>obj</strong>;[必须];类型：Object; </p>
                                <p><span class="green">@returns</span>:null</p>
                                <div>
                                    <p>Mallan.nameSpace.pack函数复制将obj挂载到指定的命名空间下</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//将cookie对象挂载到Mallan.util.cookie下，如果本地不存在util，则会先创建Mallan.util对象，
 再为Mallan.util.cookie赋值为cookie</span>
$.nameSpace.pack("Mallan.util.cookie",cookie);</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.extendCustom(obj)</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>obj</strong>;[必须];类型：Obejct; Object必选有3个属性：name,cls,constructType</p>
                                <p><span class="green">@returns</span>:null</p>
                                <div>
                                    <p>Mallan.extendCustom扩展自定义对象</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//为Mallan扩展自定义对象cookie</span>
$.extendCustom({
    name: "cookie",
    cls: Cookie,
    constructType: "single"
});
<span class="green">//这样就可以方便的使用$()方法来使用cookie</span>
$("cookie").get(key);
$("cookie").set(key,value);</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.singleton(init)</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>init</strong>;[必须];类型：Function; 构建单例对象的初始化函数</p>
                                <p><span class="green">@returns</span>:Object</p>
                                <div>
                                    <p>Mallan.singleton函数创建一个singleton对象，该对象有一个getInstance方法,可结合Mallan.extendCustom一起使用</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//创建一个单例cookie对象</span>
var cookie = $.singleton(function(){
<span class="green">//TODO</span>
    return {
        get:function(){},
        set:function(){}
    }
});
<span class="green">//使用cookie</span>
var cookieInstance = cookie.getInstance();
cookieInstance.get(key);
<span class="green">//进一步将其扩展到自定义对象</span>
$.extendCustom({
    name:'cookie',
    cls:cookie,
    constructType:'single'
});
<span class="green">//可以这样使用cookie。Mallan函数将自动执行cookie.getInstance()</span>
$('cookie').get(key);</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.getScript(url [,callback])</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>url</strong>;[必须];类型：String; 脚本地址</p>
                                <p><span class="green">@param</span>：<strong>callback</strong>;[可选];类型：Function; 脚本加载后的回调函数</p>
                                <p><span class="green">@returns</span>:null</p>
                                <div>
                                    <p>Mallan.getScript函数动态异步加载一个js脚本</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//加载一个脚本</span>
$.getScript('someurl',function(){
<span class="green">//TODO</span>
});</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.require(modules [,callback])</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>modules</strong>;[必须];类型：String;模块的名称，多个模块用逗号隔开</p>
                                <p><span class="green">@param</span>：<strong>callback</strong>;[可选];类型：Function;</p>
                                <p><span class="green">@returns</span>:null</p>
                                <div>
                                    <p>Mallan.require 核心模块，动态加载所需的模块及其依赖模块。如果该模块已经加载则直接callback，如果该模块未加载，则加载相应脚本后callback。
                                    任意模块不会加载2次。同时只会有一个异步require正在请求。请求过程中的其他require请求会自动将callback函数push到回调队列或者合并过程中的所有require，等此次require完成后一起发出。
                                    使用require可以使你不必关心模块之间的依赖关系，也不必关心模块是否加载过。    
                                    </p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//使用photoSlide模块</span>
$.require('plugin.photoSlide',function(){
<span class="green">//TODO</span>
    new $.plugin.photoSlide(dom,options);
});</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Object Mallan.tools</h4>
                            <div>
                                <div>
                                    <p>提供的工具函数有trim(str),merge(o1,o2),toCamel(str),isArray(arr),contain(arrOrObj,item)
                                    </p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//使用merge函数</span>
var newObject = $.tools.merge(o1,o2);</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="holder_animate">
                    <h3 class="linear_bg">animate.js</h3>
                    <div class="api">
                        <p>mallanJS 动画库</p>
                        <p>提供创建动画的类库，并扩展Mallan.dom.element对象，提供方便的调用方式</p>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Class Mallan.animation.animate(dom)</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>dom</strong>;[必须];类型：HTMLDOMElement; </p>
                                <div>
                                    <p>使用new Mallan.animation.animate(dom)来实例化一个animate对象，然后可以调用对象的方法来实现动画效果</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//实例化对象</span>
var ani = new Mallan.animation.animate(oneDiv);
<span class="green">//添加动画完成的回调函数</span>
ani.events.onComplete.bindOnce(function(){
    console.log('完成');
});</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.animation.animate.start(keys,values,time)</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>keys</strong>;[必须];类型：String or Array; css属性，可以是单个string,也可以是数组 </p>
                                <p><span class="green">@param</span>：<strong>values</strong>;[必须];类型：String or Array; css属性，可以是单个string,也可以是数组;数量必须与keys保持一致 </p>
                                <p><span class="green">@param</span>：<strong>time</strong>;[必须];类型：Number 多少时间内完成动画，单位ms </p>
                                <div>
                                    <p>使用animate对象的start方法来实现动画效果</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//实例化对象</span>
var ani = new Mallan.animation.animate(oneDiv);
<span class="green">//添加动画完成的回调函数</span>
ani.events.onComplete.bindOnce(function(){
    console.log('完成');
});
<span class="green">//开始动画，使div的宽高在300ms内增长至300px</span>
ani.start(['width','height'],['300px','300px'],300);</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.animation.animate.stop()</h4>
                            <div>
                                <div>
                                    <p>使用animate对象的stop方法来停止动画</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//实例化对象</span>
var ani = new Mallan.animation.animate(oneDiv);
<span class="green">//添加动画完成的回调函数</span>
ani.events.onComplete.bindOnce(function(){
    console.log('完成');
});
<span class="green">//开始动画，使div的宽高在300ms内增长至300px</span>
ani.start(['width','height'],['300px','300px'],300);
<span class="green">//停止动画</span>
ani.stop();</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.dom.element.animate(keys,values,time,onComplete)</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>keys</strong> 同animate.start方法</p>
                                <p><span class="green">@param</span>：<strong>values</strong> 同animate.start方法</p>
                                <p><span class="green">@param</span>：<strong>time</strong> 同animate.start方法</p>
                                <p><span class="green">@param</span>：<strong>onComplete</strong> [可选];类型：Function,完成所有动画后的回调函数</p>
                                <div>
                                    <p>扩展Mallan.dom.element对象，为其提供animate方法以实现方便的调用</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
<span class="green">//使所有div的宽高在300ms内增长至300px</span>
$("div").animate(['width','height'],['300px','300px'],300,function(){
    console.log('all complete');
})</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="holder_fade">
                    <h3 class="linear_bg">fade.js</h3>
                    <div class="api">
                        <p>使用animate动画库扩展Mallan.dom.element对象，实现渐入渐出效果</p>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.dom.element.fadeIn(time)</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>time</strong>;[可选];类型：Number;效果时间,单位ms，默认200</p>
                                <div>
                                    <p>使用 Mallan.dom.element.fadeIn()实现元素透明度增至100的效果</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
$('div').fadeIn();</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="child_api close">
                            <h4><em class="md_arrow"></em>Function Mallan.dom.element.fadeOut(time)</h4>
                            <div>
                                <p><span class="green">@param</span>：<strong>time</strong>;[可选];类型：Number;效果时间,单位ms，默认200</p>
                                <div>
                                    <p>使用 Mallan.dom.element.fadeOut()实现元素透明度减至0的效果</p>
                                    <div class="example">
                                        示例：
                                        <div class="code"><pre>
$('div').fadeOut();</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
     </div>
        <footer>
            <p>
                &copy; Copyright  by allanma
            </p>
        </footer>
        <script type="text/javascript" src="../Mallan.js"></script>
        <script type="text/javascript">
            $.require('plugin.treeview,dom.element.offset,dom.element.node,animation.animate', function() {
                var tree = new $.plugin.treeView("menu_list", {
                    data : [{
                        name : "Mallan.js"
                    }, {
                        name : "animation",
                        children : [{
                            name : "animate.js"
                        }, {
                            name : "fade.js"
                        }, {
                            name : "slide.js"
                        }]
                    }, {
                        name : "dom",
                        children : [{
                            name : 'element',
                            children : [{
                                name : "attribute.js"
                            }, {
                                name : "node.js"
                            }, {
                                name : "style.js"
                            }]
                        }, {
                            name : "element.js"
                        }, {
                            name : "selector.js"
                        }]
                    }, {
                        name : "events",
                        children : [{
                            name : "customevent.js"
                        }, {
                            name : "event.js"
                        }, {
                            name : "eventbind.js"
                        }, {
                            name : "keycode.js"
                        }]
                    }, {
                        name : "lang",
                        children : [{
                            name : "array.js"
                        }, {
                            name : "interface.js"
                        }]
                    }, {
                        name : "plugin",
                        children : [{
                            name : "inputs.js"
                        }, {
                            name : "photoslide.js"
                        }, {
                            name : "shortcut.js"
                        }]
                    }, {
                        name : "util",
                        children : [{
                            name : "browser.js"
                        }, {
                            name : "cookie.js"
                        }, {
                            name : "getcss.js"
                        }, {
                            name : "linklist.js"
                        }, {
                            name : "listitem.js"
                        }, {
                            name : "loader.js"
                        }, {
                            name : "page.js"
                        }, {
                            name : "querystring.js"
                        }]
                    }]
                }),
                content  = $(".content"),
                contentOffset = content.offsetTop(),
                currentMargin;
                tree.unexpandAll();
                tree.onNodeClick.on(function(node) {
                    node.toggleExpand();
                    if(!node.hasChild()){
                        var id = node.content.replace('.js','').toLocaleLowerCase(),offset;
                        $('#holder_'+id).exist(function(){
                            window.scrollTo(0,0);
                           offset = this.offsetTop() - contentOffset;
                           currentMargin = parseInt(this.parent().css('margin-top')) || 0;
                           this.parent().animate('margin-top',currentMargin-offset+'px',100);
                        });
                    }
                });
            });
            $.require('animation.animate',function(){
                $('.js_search_text').bind('focus',function(){
                    $(this.parentNode).animate('width','200px');
                }).bind('blur',function(){
                    $(this.parentNode).animate('width','160px')
                });
            });

            $.require('events.eventbind',function(){
                $(".child_api h4").bind('click',function(){
                    var parent = $(this.parentNode);
                    if(parent.hasClass('open')){
                        parent.removeClass('open').addClass('close');
                    }else{
                        parent.removeClass('close').addClass('open');
                    }
                });
            });

        </script>
        
    </body>
</html>
